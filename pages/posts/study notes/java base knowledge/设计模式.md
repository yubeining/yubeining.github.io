---
title: 设计模式
date: 2025-04-19
updated: 2025-04-19
categories: java
tags:
  - java
  - 笔记
top: 1
---

# 设计模式

### 1、单例模式

确保一个类只有一个实例，并提供全局访问点



#### 如何防止反射或者反序列化攻击

防止反射：在单例类的构造函数中添加一个检查，如果已经存在实例，则抛出异常。这样就可以防止通过反射创建新实例，抛出异常并阻止创建

防止反序列化攻击：实现serializable接口并添加readResolve方法防止反序列化攻击。返回单例实例，而不是反序列化对象。这样就算反序列化成功，也只会返回单例实例，而不会创建新实例。



#### 哪些情况下使用

资源共享：多个对象需要共享同一个资源时，确保只有一个实例来管理该资源

例如：数据库连接池、线程池

控制实例数量：限制一个类只能有一个实例

例如：系统的配置文件、日志记录器等

管理全局状态：当需要在整个系统中共享一些全局状态或数据时

例如：全局的配置信息、用户的登录信息



#### 问题

线程安全：

序列化与反序列化：

测试困难：





### 2、举例设计模式

#### 工厂模式

通过工厂类创建对象，隐藏具体实现细节

#### 单例模式

确保一个类只有一个实例，并提供全局访问点

#### 原型模式

通过复制现有对象来创建新对象

#### 适配器模式

将一个类的接口转换为另一个类的接口

#### 装饰器模式

动态地给对象添加额外的功能

#### 代理模式

为其他对象提供一个代理，以控制对该对象的访问

#### 观察者模式

定义对象间的一对多依赖关系，当一个对象状态改变时，相关对象收到通知并自动更新

