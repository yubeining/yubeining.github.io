---
title: 推荐工程架构
date: 2025-04-19
updated: 2025-04-19
categories: 搜推广
tags:
  - 搜推广
  - 笔记
top: 1
---

igraph是在线图存储和查询服务，提供稳定且低时延的在线查询和更新服务
可以通过代码从现有关系中查询想要的数据

主要用于处理图存储和查询的问题，包括query解析、表数据查询、结果表示与计算等
igraph采用两层架构：proxy+searcher
其中searcher管理表的分片数据，负责分片数据的查询/更新，而proxy负责query的验证和解析，
按照表的分片逻辑向searcher发起查询，对返回的结果集进行计算并输出结果


回流：将数据从数据源构建成索引，并使在线集群加载索引的过程

回流的过程：
1、触发：指通过协议通知回流服务进行回流的行为
2、构建：将数据从数据源构建成索引的过程，构建完成的索引会存储在hdfs上
3、切换：将hdfs上构建好的索引分发到igraph集群，并加载索引的过程



